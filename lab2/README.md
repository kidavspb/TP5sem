Цель работы:

Получить навыки работы обработки исключений при работе с массивами,
формируемыми в различных режимах. Изучить средства среды
программирования Microsoft Visual Studio Community 2019/2022 для
создания статистических библиотек (файлов формата \*.lib), содержащих
описание ASM-модулей с поддержкой языка С/С++/С\#, и их включения в
основной проект.

# Часть 1.

Задание к лабораторной работе:

На языке Ассемблера реализовать алгоритм преобразования информации с
использованием логических выражений или методов криптографического
преобразования символьной информации в виде отдельной статической
библиотеки. В модуле С/С++ выполнить подключение статистической
библиотеки и вызов ASM- процедуры и обеспечить потоковый ввод/вывод
внешних данных.

Вариант задания, использованный при выполнении практической работы №1
(Вариант №12\*):

Реализовать механизм шифрования и расшифрования битового потока
информации, где ключевая последовательность генерируется линейным
регистром с обратными связями, определяемыми неприводимым полиномом.

Ход работы:

Программа разделена на условные 2 части: шифрование и расшифрование
строки. Строка для шифрования/расшифрования вводится пользователем с
клавиатуры. Ключевая последовательность генерируется с помощью
4-битового регистра сдвига с линейной обратной с отводами от последних 2
битов, которые генерируют новый бит с помощью операции XOR. Поскольку
для определения регистра использовался неприводимый полином, но период
генерируемой им ключевой последовательности максимален и равен
соответственно 2^4^-1=15. Схема работы РСЛОС с перечнем его состояний
представлена на Рисунке 1:

![](vertopal_0cdc197cc9c94a728bd9dcb6ad12ef1d/media/image1.jpeg)\
*Рисунок 1 -- Схема работы РСЛОС с его состояниям*

Шифрование осуществляется с помощью операции XOR между битами исходной
строки и ключевой последовательностью, сгенерированной РСЛОС. Регистр
генерирует новые биты ключа для каждого бита исходного сообщения.

Расшифровка осуществляется идентично шифрованию, для этого необходимы
лишь зашифрованная строка и начальное состояние РСЛОС, которое
использовалось для шифрования этой же строки.

# Часть 2.

На языке C\# в WindowsForm:

1)  Создать программный проект с защищенным интерфейсом пользователя.
    Обработанные *исключения* фиксировать в textbox ГЛАВНОЙ формы
    проекта и в текстовом файле с указанием даты, времени проявления
    исключений, а также стэка методов, приведших к исключению

2)  Создать программу, выполняющую персональное задание в соответствии с
    заданным вариантом, причем ввод и вывод массивов производить с
    использованием компонента dataGridView. Интерфейс пользователя
    должен предлагать выбор способа формирования массива (случайно,
    случайно с заданной частотой, вручную)

3)  Для обработки массивов использовать несколько потоков.

4)  Выполнить сравнение по времени выполнения обработок массива с и без
    потоков. Время выполнения фиксировать на форме проекта.

5)  Оформить отчет по лабораторной работе, содержащий: титульный лист,
    название, номер и цель работы, постановку задачи, алгоритм решения
    для каждого программного модуля, листинг программных модулей,
    распечатку результатов, распечатку изображения форм, используемых в
    программе.

Задание (Вариант №7):

Из элементов массива *А* (предусмотреть возможность ввода массива
случайно и случайно с заданной частотой) сформировать массив *D* той же
размерности по правилу: первые 10 элементов - *D~i~=A~i~+i,* остальные -
*D~i~=A~i~-i*. Заменить минимальный по модулю положительный элемент
массива *А* нулем. Заменить элементы с *k1*-го по *k2*-й на обратные.

Ход работы:

После запуска программы пользователь видит главную форму проекта,
представленную на Рисунке 2:

![](vertopal_0cdc197cc9c94a728bd9dcb6ad12ef1d/media/image2.png)\
Рисунок 2 -- Главная форма проекта с вкладками меню

На этой форме фиксируются обработанные исключения, которые могут
возникнуть в ходе использования проекта. Также пользователь может
увидеть сверху вкладки меню, в частности «Технологии и методы
программирования». Кликнув по ней, открывается подменю с выбором
конкретного программного проекта. Со временем перечень вариантов будет
расширяться, на данный момент это «ЛР 1» и «ЛР 2». Демонстрация работы
вкладок меню представлена на Рисунке 3:

![](vertopal_0cdc197cc9c94a728bd9dcb6ad12ef1d/media/image3.png)\
Рисунок 3 -- Демонстрация работы вкладок меню

После выбора одного из пунктов, на экране открывается новое окно формы,
соответствующее описанию задания для данного проекта. Внешний вид формы,
соответствующей заданию Лабораторной работы №2 представлен на Рисунке 4:

![](vertopal_0cdc197cc9c94a728bd9dcb6ad12ef1d/media/image4.png)\
*Рисунок 4 -- Внешний вид формы для ЛР 2*

На левой части представлено управление способом формирования массива в
виде трех переключателей со значениями «Вручную», «Случайно» и «Случайно
с заданной частотой». По умолчанию выбран вариант «Вручную». Для
вариантов «Случайно» и «Случайно с заданной частотой» ручной ввод
элементов массива становиться недоступным. Если не выбран пункт
«Случайно с заданной частотой», то поле для ввода значения частоты также
блокируется. программа ожидает от пользователя ввод фамилии и имени с
клавиатуры.

Чуть ниже представлены 2 массива в виде таблиц: исходный и
результирующий, который получается после выполнения алгоритма,
описанного в индивидуальном задании. Также на форме присутствуют кнопка
«Старт» для запуска алгоритма обработки массива, тумблер для
включения/выключения многопоточного режима работы программы, текстовое
поле для вывода времени выполнения алгоритма и кнопка «Доп», при нажатии
на которую раскрывается форма, выполняющая дополнительное задание к
работе.

Чтобы алгоритм обработки исходного массива и формирования
результирующего был выполнен полностью корректно, должны быть заполнены
все активные поля. Если это условие не было выполнено, например не было
введено число k, то программа выполнит часть алгоритма, не требующую
ввода числа k, и отобразит обработанное исключение с указанием даты,
времени проявления исключения, а также стэка методов, приведших к
исключению на главной форме проекта и запишет его в файл
«exceptions.txt», что продемонстрировано на Рисунке 5.

![](vertopal_0cdc197cc9c94a728bd9dcb6ad12ef1d/media/image5.png)\
*Рисунок 5 -- Фиксация исключения на главной форме и в файле*

# Дополнительное задание.

Задание:

Имеется гистограмма. Разработать алгоритм для вычисления объема воды,
которая сможет удержаться на гистограмме (см. Рисунок 6).
Предполагается, что ширина каждого столбца гистограммы равна 1.

![](vertopal_0cdc197cc9c94a728bd9dcb6ad12ef1d/media/image6.png)\
*Рисунок 6 -- Пример (черные полосы -- столбцы гистограммы, серые --
вода)*

Ход работы:

Для представленного примера входными данными можно считать высоты
столбцов: {0, 0, 4, 0, 0, 6, 0, 0, 3, 0, 8, 0, 2, 0, 5, 2, 0, 3, 0, 0}.
Выходом работы программы же будем считать нарисованную диаграмму,
корректно заполненную водой и численное значение ее объема, для
представленного примера таковым является: 44.

Можно заметить, что объем воды в конкретной области определяется самыми
высокими столбцами слева и справа. Например, вода заполняет область
между столбцом высотой 6 и столбцом высотой 8 до высоты 6. Таким
образом, высота определяется вторым по размеру столбцом. Общий объем
воды равен сумме объемов у всех столбцов. Соответственно наиболее
эффективным способом вычисления объема воды над каждым столбцом будет
пройти по массиву столбцов и заранее вычислить высоты самых высоких
столбцов слева и справа для каждого индекса. Минимум этих значений
определяет «уровень» воды у столбца. Разность между уровнем воды и
высотой столбца будет определять объем воды.

Таким образом можно составить алгоритм:

1.  Выполнить перебор слева направо с определением максимальной
    обнаруженной высоты и сохранением левого максимума.

2.  Выполнить перебор справа налево с определением максимальной
    обнаруженной высоты и сохранением правого максимума.

3.  Выполнить перебор по гистограмме с вычислением минимума левого и
    правого максимума по каждому индексу.

4. Выполнить перебор по гистограмме с вычислением разности между каждым
минимумом и высотой столбца. Просуммировать разности.

В реализации хранить столько данных не нужно, а шаги 2, 3 и 4 можно
объединить в один проход. Сначала вычислим левые максимумы за один
проход, а затем выполняем перебор в обратном направлении, вычисляя
правый максимум. Для каждого элемента вычисляется меньшее значение по
левому и правому максимуму и разность между этим значением и высотой
столбца. Полученный результат прибавляется к сумме.

Итоговая алгоритмическая сложность по времени составит O(n), где n --
длина гистограммы. Результат работы алгоритма представлен на Рисунке 7:

![](vertopal_0cdc197cc9c94a728bd9dcb6ad12ef1d/media/image7.png)*\
Рисунок 7 -- Демонстрация результата выполнения реализованного алгоритма
на входных значениях из примера*

# Выводы:

1.  Получены навыки работы обработки исключений при работе с массивами,
    формируемыми в различных режимах.

2.  Изучены средства среды программирования Microsoft Visual Studio
    Community 2019/2022 для создания статистических библиотек (файлов
    формата \*.lib), содержащих описание ASM-модулей с поддержкой языка
    С/С++/С\#, и их включения в основной проект.
